# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/conf/kubernetes.conf.erb

<match fluent.**>
  type null
</match>

<source>
  type tail
  path /var/log/containers/*.log
  pos_file /fluentd/log/fluentd-containers.log.pos
  time_format %Y-%m-%dT%H:%M:%S.%NZ
  tag kubernetes.*
  format json
  read_from_head true
</source>

<source>
  type tail
  format none
  path /var/log/audit/audit.log
  pos_file /fluentd/log/fluentd-audit.log.pos
  tag audit
</source>

<source>
  type tail
  path /var/log/yum.log
  pos_file /fluentd/log/fluentd-yum.log.pos
  format /^(?<time>[^ ]{3} [^ ]{1,2} [^ ]{8}) (?<message>.*)$/
  time_format %b %d %H:%M:%S
  tag yum
</source>

<source>
  type tail
  path /var/log/cron
  pos_file /fluentd/log/fluentd-cron.log.pos
  format /^(?<time>[^ ]{3} [^ ]{1,2} [^ ]{8}) (?<host>[^ ]*) (?<message>.*)$/
  time_format %b %d %H:%M:%S
  tag cron
</source>

<source>
  type tail
  path /var/log/messages
  pos_file /fluentd/log/fluentd-messages.log.pos
  format /^(?<time>[^ ]{3} [^ ]{1,2} [^ ]{8}) (?<host>[^ ]*) (?<message>.*)$/
  time_format %b %d %H:%M:%S
  tag messages
</source>

<source>
  type tail
  path /var/log/secure
  pos_file /fluentd/log/fluentd-secure.log.pos
  format /^(?<time>[^ ]{3} [^ ]{1,2} [^ ]{8}) (?<host>[^ ]*) (?<message>.*)$/
  time_format %b %d %H:%M:%S
  tag secure
</source>


# filter to append kubernetes metadata for json-file log driver
<filter kubernetes.var.log.containers.**.log>
  type kubernetes_metadata
</filter>
